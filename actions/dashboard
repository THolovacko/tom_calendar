#! /usr/bin/ruby

# @remember: should download the jquery libs locally (maybe concatenate?)
# @remember: decide if delete session item on logout or periodically delete "expired" sessions
# @test:     user agent detection on several platforms

# @current: create form


cookie_session_id = ENV['HTTP_COOKIE']&.split(';')&.find{ |cookie| cookie.match?('session_id') }&.sub('session_id=','')&.strip
cookie_session_id = nil if cookie_session_id == ''

unless cookie_session_id
  print "Content-type: text/html\n\n"
  print %(
  <html lang="en">
    <body onload="reSignIn()"></body>
    <script>
      function reSignIn() {
        window.location = "https://tomcalendar.com";
      }
    </script>
  </html>
  )
  return
end

user_agent_str = ENV['HTTP_USER_AGENT'].downcase
IS_DESKTOP = !( /phone|android/.match(user_agent_str) )
VW_FACTOR   = IS_DESKTOP ? 0.35 : 1
VH_FACTOR   = IS_DESKTOP ? 1 : 1
#VH_FACTOR   = IS_DESKTOP ? 0.93 : 1
FONT_FACTOR = IS_DESKTOP ? 0.6 : 1
SCALE       = IS_DESKTOP ? 0.6 : 1

# render dashboard
print "Content-type: text/html\n\n"
print %(
<html lang="en">
  <title>Dashboard</title>
  <head>
    <!-- <script src="https://apis.google.com/js/platform.js" async defer></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500&display=swap" rel="stylesheet">
  </head>
  <body onload="onNavIconSelect('explore'); init();">
    <div id="background">
      <div id="navbar">
        <i class="material-icons md-36 nav select" id="explore" #{( IS_DESKTOP ? 'onmousedown' : 'ontouchstart' )}="onNavIconSelect('explore')">explore</i>
        <div class="navbar_space"></div>
        <i class="material-icons md-36 nav select" id="search" #{( IS_DESKTOP ? 'onmousedown' : 'ontouchstart' )}="onNavIconSelect('search')">search</i>
        <i class="material-icons md-36 nav create" id="create" #{( IS_DESKTOP ? 'onmousedown' : 'ontouchstart' )}="onCreate()">create</i>
        <i class="material-icons md-36 nav select" id="profile" #{( IS_DESKTOP ? 'onmousedown' : 'ontouchstart' )}="onNavIconSelect('profile')">person</i>
        <div class="navbar_space"></div>
        <i class="material-icons md-36 nav select" id="settings" #{( IS_DESKTOP ? 'onmousedown' : 'ontouchstart' )}="onNavIconSelect('settings')">settings</i>
      </div>
      <div class="page", id="explore_page">
        <h1>explore</h1>
      </div>
      <div class="page", id="search_page">
        <h1>search</h1>
      </div>
      <div class="page", id="profile_page">
        <h1>profile</h1>
      </div>
      <div class="page", id="settings_page">
        <h1 style="text-align:left;font-size:#{6 * FONT_FACTOR}rem;margin-left:#{6 * VW_FACTOR}vw;margin-top:#{6 * VH_FACTOR}vh">Settings</h1>
        <div style="border-bottom-style:solid; border-width:thin; border-color:#E8E8EB;"></div>
        <div class="settings_btn" #{( IS_DESKTOP ? 'onmousedown' : 'ontouchstart' )}="onViewSessions()">Sessions<i class="material-icons md-36 settings_navigate_next">navigate_next</i></div>
        <div class="settings_btn" #{( IS_DESKTOP ? 'onmousedown' : 'ontouchstart' )}="onDeactivate()">Deactivate account<i class="material-icons md-36 settings_navigate_next">navigate_next</i></div>
        <button id="log_out_btn" #{( IS_DESKTOP ? 'onclick' : 'ontouchend' )}="signOut()">Log out</button>
      </div>
      <div class="page", id="sessions_page">
        <div class="sessions_page_header">
          <i class="material-icons md-36 settings_navigate_before" #{( IS_DESKTOP ? 'onmousedown' : 'ontouchstart' )}="current_settings_page='settings';onNavIconSelect('settings')">keyboard_backspace</i>
          <div class="settings_page_title">Sessions</div>
        </div>
        <div style="border-bottom-style:solid;margin-top:#{4 * VH_FACTOR}vh; border-width:thin; border-color:#E8E8EB;"></div>
      </div>
      <div class="page", id="deactivate_page">
        <div class="sessions_page_header">
          <i class="material-icons md-36 settings_navigate_before" #{( IS_DESKTOP ? 'onmousedown' : 'ontouchstart' )}="current_settings_page='settings';onNavIconSelect('settings')">keyboard_backspace</i>
          <div class="settings_page_title">Deactivate account</div> 
        </div>
        <div style="text-align:left;margin-left:#{6 * VW_FACTOR}vw;margin-top:#{2 * VH_FACTOR}vh;">
          <h2 style="font-size:#{2.75 * FONT_FACTOR}rem;">This action is permanent</h2>
          <ul style="font-size:#{2 * FONT_FACTOR}rem;">
            <li>You CAN NOT restore your TomCalendar account after deactivation.</li>
            <li>Some account information may still be available in search engines, such as Google or Bing.</li>
            <li>All Tomcalendar events in your Google Calendar will be deleted.</li>
          </ul>
        </div>
      </div>
    </div>
  </body>
  <div id="popup_close_layer" #{( IS_DESKTOP ? 'onmousedown' : 'ontouchstart' )}="onCreateClose();"></div>
  <div id="create_form">
    <i class="material-icons md-36 create_close" id="create_close" #{( IS_DESKTOP ? 'onmousedown' : 'ontouchstart' )}="onCreateClose()">close</i>
    <button id="save_event_btn" #{( IS_DESKTOP ? 'onmousedown' : 'ontouchstart' )}="saveEvent()">Save</button>
    <div id="create_form_title"><input type="text" id="create_form_title_input" placeholder="Add title"></div>
    <div id="start_date"><input type="text" id="start_datepicker" placeholder="Add start date"></div>
  </div>
  <script>
    var current_settings_page = "settings";

    function init() {
      $.ajax({
        type: 'POST',
        url: 'https://tomcalendar.com/validate_tokens_and_load_initial_content',
        contentType: 'application/octet-stream; charset=utf-8',
        success: function(result) {
          if (result["is_valid"]) {
            // handle initial data load

            $.ajax({
              type: 'POST',
              url: 'https://tomcalendar.com/create_tomcalendar_if_needed',
              contentType: 'application/octet-stream; charset=utf-8',
              processData: false,
              data: ''
            });

            // @remember: should probably post request to fix potential out of sync event changes (should make sure occurs after calendar is created)
          } else {
            document.cookie = "session_id=;secure";
            window.location = "https://tomcalendar.com/";
          }
        },
        processData: false,
        data: ''
      });

      $.ajax({
        type: 'POST',
        url: 'https://tomcalendar.com/load_settings_data',
        contentType: 'application/octet-stream; charset=utf-8',
        success: function(result) {
          var deactivate_page       = document.getElementById("deactivate_page");
          var sessions_page         = document.getElementById("sessions_page");
          var sessions              = result['sessions'];
          var current_session_index = result['current_session_index'];

          // swap first sesions with active session
          var first_session = sessions[0];
          sessions[0] = sessions[current_session_index];
          sessions[current_session_index] = first_session;

          let phone_regex = /phone|android/;
          var session_icon_type = "smartphone";
          if (sessions[0]['device_type'].toLowerCase().match(phone_regex) == null) {
            session_icon_type = "computer";
          }

          sessions_page.insertAdjacentHTML("beforeend", `
            <div class="session_widget" id="active_session_widget">
              <i class="material-icons md-36 session_icon">${session_icon_type}</i>
              <div style="display:inline-block;width:#{2 * VW_FACTOR}vw"></div>
              <span class="session_device_type">${sessions[0]['device_type']}</span>
              <div style="display:inline-block;width:#{1 * VW_FACTOR}vw"></div>
              <span class="session_last_updated" style="color: green;">Active now</span>
            </div>
          `);
          
          for(var i=1; i < sessions.length; i++) {
            // @remember: need more robust device type checking for sessions
            session_icon_type = "smartphone";
            if (sessions[i]['device_type'].toLowerCase().match(phone_regex) == null) {
              session_icon_type = "computer";
            }
            sessions_page.insertAdjacentHTML("beforeend", `
              <div class="session_widget" id=${sessions[i]['device_id']}>
                <i class="material-icons md-36 session_icon">${session_icon_type}</i>
                <div style="display:inline-block;width:#{2 * VW_FACTOR}vw"></div>
                <span class="session_device_type">${sessions[i]['device_type']}</span>
                <div style="display:inline-block;width:#{1 * VW_FACTOR}vw"></div>
                <span class="session_last_updated">${sessions[i]['last_active']}</span>
                <div class="session_log_out" #{( IS_DESKTOP ? 'onmousedown' : 'ontouchstart' )}="logOutSession('${sessions[i]['device_id']}');">Log out</div>
              </div>
            `);
          }

          sessions_page.insertAdjacentHTML("beforeend", `
            <div style="margin-top:#{4 * VH_FACTOR}vh;"></div>
            <div id="all_sessions_log_out" #{( IS_DESKTOP ? 'onmousedown' : 'ontouchstart' )}="logOutAllOtherSessions();">Log out all other sessions</div>
          `);

          deactivate_page.insertAdjacentHTML("beforeend", `
            <div id="deactivate_btn" style="margin-top:#{2 * VH_FACTOR}vh;" #{( IS_DESKTOP ? 'onmousedown' : 'ontouchstart' )}="confirmRevoke('${result['deactivation_code']}');">Deactivate my account</div>
          `);
        },
        processData: false,
        data: ''
      });
    }
    function signOut() {
      document.getElementById("background").style.webkitFilter = "blur(100px)";
      $.ajax({
        type: 'POST',
        url: 'https://tomcalendar.com/sign_out',
        contentType: 'application/octet-stream; charset=utf-8',
        processData: false,
        success: function(result) {
          document.cookie = "session_id=;secure";
          window.location = "https://tomcalendar.com/";
        },
        data: ''
      });
    }
    function confirmRevoke(code) {
      if (window.confirm("Deactivating your account will delete all your TomCalendar events from your google calendar. Are you sure you want to deactivate your account?")) {
        document.getElementById("background").style.webkitFilter = "blur(100px)";
        $.ajax({
          type: 'POST',
          url: 'https://tomcalendar.com/deactivate_tomcalendar',
          contentType: 'application/octet-stream; charset=utf-8',
          processData: false,
          success: function(result) {
            document.cookie = "session_id=;secure";
            window.location = "https://tomcalendar.com/";
          },
          data: code
        });
      }
    }
    function logOutAllOtherSessions() {
      var all_session_widgets = document.getElementsByClassName("session_widget");
      var non_active_session_widget_ids = [];
      for(var i=0; i < all_session_widgets.length; i++) {
        if (all_session_widgets[i].id != "active_session_widget") {
          non_active_session_widget_ids.push(all_session_widgets[i].id);
        }
      }
      for(var i=0; i < non_active_session_widget_ids.length; i++) {
        document.getElementById(non_active_session_widget_ids[i]).remove();
      }
      $.ajax({
        type: 'POST',
        url: 'https://tomcalendar.com/log_out_all_other_sessions',
        contentType: 'application/octet-stream; charset=utf-8',
        processData: false,
        data: ''
      });
    }
    function logOutSession(session_index) {
      $.ajax({
        type: 'POST',
        url: 'https://tomcalendar.com/sign_out',
        contentType: 'application/octet-stream; charset=utf-8',
        processData: false,
        data: session_index
      });
      var session_widget = document.getElementById(session_index);
      session_widget.remove();
    }
    function onNavIconSelect(nav_icon_id) {
      unactivateAllNavIcons();
      unactivateAllPages();
      var nav_icon = document.getElementById(nav_icon_id);
      nav_icon.style.color = "black";

      if(nav_icon_id != 'settings') {
        document.body.style.backgroundColor = "#FEFFFE";
        var page = document.getElementById(nav_icon_id + "_page")
      }
      else {
        document.body.style.backgroundColor = "#F2F2F7";
        var page = document.getElementById(current_settings_page + "_page");
      }

      page.style.display = "block";
    }
    function onCreate() {
      var create_form = document.getElementById("create_form");
      var popup_close_layer = document.getElementById("popup_close_layer");
      popup_close_layer.style.display = "block";
      create_form.style.display = "block";
    }
    function onCreateClose() {
      var create_form = document.getElementById("create_form");
      var popup_close_layer = document.getElementById("popup_close_layer");
      popup_close_layer.style.display = "none";
      create_form.style.display = "none";
    }
    function unactivateAllNavIcons() {
      var all_nav_icons = document.getElementsByClassName("material-icons nav select");
      for(var i = 0; i < all_nav_icons.length; i++){
        all_nav_icons[i].style.color = "rgba(0, 0, 0, .6)";
      }
    }
    function unactivateAllPages() {
      var all_pages = document.getElementsByClassName("page");
      for(var i = 0; i < all_pages.length; i++){
        all_pages[i].style.display = "none";
      }
    }
    function onViewSessions() {
      unactivateAllPages();

      current_settings_page = "sessions";
      var sessions_page = document.getElementById("sessions_page");
      sessions_page.style.display = "block";
    }
    function onDeactivate() {
      unactivateAllPages();

      current_settings_page = "deactivate";
      var deactivate_page = document.getElementById("deactivate_page");
      deactivate_page.style.display = "block";
    }
    function saveEvent() {
      // save stuff
      // clear form

      onCreateClose();
    }
  </script>
  <style>
    html {
      text-align: center;
      border: none;
      font-family: 'Roboto', sans-serif;
      font-size: 16px;
    }
    body {
      background-color: #FEFFFE;
    }
    #navbar {
      margin: 0;
      background-color: rgba(254, 255, 254, .7);
      width: 100%;
      overflow: auto;
      border-bottom-style: solid;
      border-width: thin;
      border-color: #E8E8EB;
      position: fixed;
      top: 0;
      left: 0;
    }
    #background {
      border: none;
      transition: all 5s;
    }
    .navbar_space {
      width: #{12 * VW_FACTOR}vw;
      display: inline-block;
    }
    #create_form {
      display: none;
      position: fixed;
      width: #{( IS_DESKTOP ? '80' : '100' )}%;
      height: #{( IS_DESKTOP ? '80' : '100' )}%;
      margin-top: #{( IS_DESKTOP ? '5' : '0' )}%;
      margin-left: #{( IS_DESKTOP ? '10' : '0' )}%;
      text-align: center;
      border-radius: #{( IS_DESKTOP ? '25' : '0' )}px;
      border-color: white;
      background-color: white;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
    }
    #popup_close_layer {
      display: none;
      width: 100%;
      height: 100%;
      position: fixed;
      background-color: rgba(0, 0, 0, 0.5);
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
    }
    .page {
      display: none;
      position: absolute;
      border: none;
      left: 0;
      right: 0;
      margin-top: #{7 * VH_FACTOR}vh;
    }
    .material-icons {
      cursor: default;
    }
    .material-icons.nav {
      margin-top: #{1.5 * VH_FACTOR}vh;
      margin-bottom: #{1 * VH_FACTOR}vh;
      font-size: #{4.35 * FONT_FACTOR}rem;
      color: #000000;
      text-align: center;
      transition: color .175s;
      transition-timing-function: ease-out;
    }
    .material-icons.nav.select {
      color: #000000;
      cursor: pointer;
    }
    .material-icons.nav.create {
      color: #0F9D58;
      border-style: solid;
      border-color: #4285F4;
      border-width: medium;
      border-radius: 8%; 
      padding-right:  #{3 * VW_FACTOR}vw;
      margin-right:   #{9 * VW_FACTOR}vw;
      padding-left:   #{3 * VW_FACTOR}vw;
      margin-left:    #{9 * VW_FACTOR}vw;
      cursor: pointer;
      transition: background-color .175s;
      transition-timing-function: ease-out;
    }
    .material-icons.nav.create:hover {
      background-color: #EEEEEE;
    }
    .material-icons.create_close {
      float: left;
      margin-left: #{4 * VW_FACTOR}vw;
      margin-top: #{3 * VH_FACTOR}vh;
      cursor: pointer;
      border-radius: 50px;
      font-size: #{4 * FONT_FACTOR}rem;
      color: #616161;
      padding: 4px;
    }
    .material-icons.create_close:hover {
      background-color: #EEEEEE;
    }
    .material-icons.search {
      float: left;
      margin-top: 4px;
      margin-left: 8px;
      margin-right: 2px;
    }
    .search_bar {
      border: solid;
      border-radius: 25px;
      border-width: 1.5px;
      border-color: black;
      width: 512;
      height: 32;
      margin-top: 8px;
      margin-left: 64px;
      float: left;
      transition: box-shadow .175s, height .175s, width .175s;
      transition-timing-function: ease-out;
    }
    .search_bar:hover {
      box-shadow: 0px 0px 4px black;
      border: none;
      width: 514;
      height: 33;
    }
    .search_bar:focus-within {
      box-shadow: 0px 0px 4px black;
      border: none;
      width: 514;
      height: 33;
    }
    .search_bar input[type=text] {
      float: left;
      padding: 12px;
      border: none;
      color: black;
      width: 470;
      height: 20px;
      margin-top: 4px;
      font-size: 16px;
    }
    #navbar input[type=text]:focus {
      outline: none;
    }
    #navbar input::placeholder {
      color: black;
      opacity: .75;
    }
    #log_out_btn {
      display: inline-block;
      width: 100%;
      height: #{5.25 * VH_FACTOR}vh;
      font-size: #{2.25 * FONT_FACTOR}rem;
      font-weight: bold;
      outline: none;
      border-top-style: solid;
      border-right-style: hidden;
      border-left-style: hidden;
      border-bottom-style: solid;
      border-width: thin;
      border-color: #E8E8EB;
      border-radius: 0;
      cursor: pointer;
      background-color: rgba(254, 255, 254, 1);
      transition: background-color .175s;
      transition-timing-function: ease-out;
      text-align: center;
      margin-top: #{4 * VH_FACTOR}vh;
      color: #0F82FF;
    }
    #create_form_title input[type=text] {
      float: left;
      border-top-style: hidden;
      border-right-style: hidden;
      border-left-style: hidden;
      border-bottom-style: solid;
      border-bottom-width: 2px;
      border-bottom-color: #E8E8EB;
      border-radius: 0;
      width: 100%;
      height: #{6 * VH_FACTOR}vh;
      font-size: #{4 * FONT_FACTOR}rem;
      margin-top: #{2 * VH_FACTOR}vh;
      color: #424242;
      background-color: white;
      text-align: center;
    }
    #create_form_title input[type=text]:focus {
      border-color: #2962FF;
      outline: none;
    }
    #create_form_title input::placeholder {
      color: #757575;
    }
    .event_datetime {
      margin: 0;
      padding: 0;
      width: 60%;
    }
    .event_datetime_text {
      display: inline-block;
      float: left;
      margin-top: 36px;
      margin-left: 8px;
      margin-right: 8px;
      text-align: center;
      font-size: 15;
      color: #424242;
    }
    #start_date {
      display: inline-block;
      float: left;
      margin-top: #{2 * VH_FACTOR}vh;
      margin-left: #{14 * VW_FACTOR}vw;
    }
    #start_date input[type=text] {
      border: none;
      width: #{38 * VW_FACTOR}vw;
      height: #{4 * VH_FACTOR}vh;
      background-color: white;
      color: #424242;
      font-size: #{2.75 * FONT_FACTOR}rem;
      float: left;
    }
    #start_date input::placeholder {
      color: #757575;
    }
    #start_date input[type=text]:focus {
      outline: none;
    }
    .sessions_page_header {
      width: 100%;
      height: #{6 * VH_FACTOR}vh;
      margin-top: #{0.75 * VH_FACTOR}vh;
    }
    .settings_btn {
      display: inline-block;
      width: #{100 - (6 * VW_FACTOR)}vw;
      height: #{5.25 * VH_FACTOR}vh;
      font-size: #{2.25 * FONT_FACTOR}rem;
      outline: none;
      text-align: left;
      line-height: #{5.25 * VH_FACTOR}vh;
      padding-left: #{6 * VW_FACTOR}vw;
      border-right-style: hidden;
      border-left-style: hidden;
      border-top-style: hidden;
      border-bottom-style: solid;
      border-width: thin;
      border-color: #E8E8EB;
      border-radius: 0;
      cursor: pointer;
      background-color: rgba(254, 255, 254, 1);
      transition: background-color .175s;
      transition-timing-function: ease-out;
      color: black;
    }
    .settings_btn:hover, #log_out_btn:hover {
      background-color: #f1fff1;
    }
    .settings_btn:active, #log_out_btn:active {
      background-color: #e5ffe5;
    }
    .settings_navigate_next {
      font-size: #{4.2 * FONT_FACTOR}rem;
      float: right;
      line-height: #{5.25 * VH_FACTOR}vh;
      margin-right: #{4 * VW_FACTOR}vw;
      color: #616161;
      cursor: pointer;
    }
    .settings_navigate_before {
      float:left;
      margin-left: #{4 * VW_FACTOR}vw;
      line-height: #{6 * VH_FACTOR}vh;
      font-size: #{4.2 * FONT_FACTOR}rem;
      color: #0F82FF;
      cursor: pointer;
      vertical-align: middle;
      display:inline-block;
    }
    .settings_page_title {
      text-align: center;
      font-size: #{4 * FONT_FACTOR}rem;
      line-height: #{6 * VH_FACTOR}vh;
      float:left;
      vertical-align: middle;
      margin-left: #{7 * VW_FACTOR}vw;
    }
    .session_widget {
      display: inline-block;
      width: #{100 - (6 * VW_FACTOR)}vw;
      height: #{7 * VH_FACTOR}vh;
      font-size: #{2.25 * FONT_FACTOR}rem;
      outline: none;
      text-align: left;
      line-height: #{7 * VH_FACTOR}vh;
      padding-left: #{6 * VW_FACTOR}vw;
      border-right-style: hidden;
      border-left-style: hidden;
      border-top-style: hidden;
      border-bottom-style: solid;
      border-width: thin;
      border-color: #E8E8EB;
      border-radius: 0;
      background-color: rgba(254, 255, 254, 1);
      color: black;
    }
    .material-icons.session_icon {
      font-size: #{5.5 * FONT_FACTOR}rem;
      vertical-align: middle;
    }
    .session_device_type {
      font-size: #{2.25 * FONT_FACTOR}rem;
    }
    .session_last_updated {
      font-size: #{1.75 * FONT_FACTOR}rem;
      color: #757575;
    }
    .session_log_out {
      display: inline-block;
      font-size: #{2.25 * FONT_FACTOR}rem;
      color: red;
      float: right;
      padding-right: #{8 * VW_FACTOR}vw;
      padding-left: #{4 * VW_FACTOR}vw;
      cursor: pointer;
    }
    .session_log_out:hover {
      background-color: #f1fff1;
    }
    .session_log_out:active {
      background-color: #e5ffe5;
    }
    #all_sessions_log_out {
      display: inline-block;
      width: 100%;
      height: #{5 * VH_FACTOR}vh;
      font-size: #{2 * FONT_FACTOR}rem;
      font-weight: bold;
      outline: none;
      border-top-style: solid;
      border-right-style: hidden;
      border-left-style: hidden;
      border-bottom-style: solid;
      border-width: thin;
      border-color: #E8E8EB;
      border-radius: 0;
      cursor: pointer;
      background-color: rgba(254, 255, 254, 1);
      transition: background-color .175s;
      transition-timing-function: ease-out;
      text-align: center;
      line-height: #{5 * VH_FACTOR}vh;
      color: #0F82FF;
    }
    #all_sessions_log_out:hover {
      background-color: #f1fff1;
    }
    #all_sessions_log_out:active {
      background-color: #e5ffe5;
    }
    #deactivate_btn {
      display: inline-block;
      height: #{5 * VH_FACTOR}vh;
      font-size: #{2 * FONT_FACTOR}rem;
      font-weight: bold;
      outline: none;
      cursor: pointer;
      text-align: center;
      line-height: #{5 * VH_FACTOR}vh;
      color: #0F82FF;
    }
    #save_event_btn {
      float: right;
      background-color: #1A73E8;
      color: white;
      border: none;
      border-radius: 8px;
      height: #{4 * VH_FACTOR}vh;
      line-height: #{4 * VH_FACTOR}vh;
      width: #{16 * VW_FACTOR}vw;
      font-size: #{2 * FONT_FACTOR}rem;
      text-align: center;
      margin-right: #{5.25 * VW_FACTOR}vw;
      margin-top: #{2.4 * VH_FACTOR}vh;
      cursor: pointer;
      outline: none;
      font-weight: bold;
    }
    #save_event_btn:hover {
      background-color: #3986eb;
    }
  </style>
</html>
)
